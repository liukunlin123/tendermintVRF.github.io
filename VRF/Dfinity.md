![Alt text](Dfinity.png)
**Dfinity的共识机制层**
1.身份层：提供所有客户端的注册表。
2.随机信标层：为包括应用程序（智能合约）在内的所有更高层提供随机源（VRF）。
3.区块链层：通过随机信标驱动的概率插槽协议，从已验证的交易中构建区块链。
4.公证层：为客户和外部观察者提供快速的确定性保证。

第二层中的随机信标是由注册客户共同生成的无偏，可验证的随机函数（VRF），任何人都无法预测VRF的每个随机输出，直到它对所有人可用为止。 这是Dfinity系统的一项关键技术，它依赖于具有唯一性和非交互性的阈值签名方案.BLS签名方案是唯一可以提供这些功能的实用方案，并且Dfinity对BLS进行了特别优化的实现 内置于[2，11]。使用阈值机制创建随机性可解决根本的“最后参与者”问题。 在没有阈值机制的情况下用于创建公共随机性的任何分散协议都存在以下问题：该协议中的最后一个参与者知道下一个随机值，并且可以决定中止该协议。